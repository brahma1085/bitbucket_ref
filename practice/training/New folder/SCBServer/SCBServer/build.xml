<?xml version="1.0"?>


<!-- ======================================================================= -->
<!-- JBoss build file -->
<!-- ======================================================================= -->

<project name="JBoss" default="ServerBankingjar" basedir=".">

    <property environment="env"/>
	<property name="src.dir" value="${basedir}"/>
	<property name="src.resources" value="${basedir}"/>
    <property name="jboss.home" value="${env.JBOSS_HOME}"/>
	
    <property name="build.dir" value="${basedir}/build"/>
    <property name="build.classes.dir" value="${build.dir}/classes"/>

  <!-- Build classpath -->

  <path id="classpath">
  	<fileset dir="${jboss.home}/client">
            <include name="**/*.jar"/>
        </fileset>
	<pathelement location="${build.classes.dir}"/>
	
	<pathelement location="${basedir}/"/>
  </path>

  <property name="build.classpath" refid="classpath"/>
  <!-- =================================================================== -->
  <!-- Prepares the build directory                                        -->
  <!-- =================================================================== -->
  <target name="prepare" >
  	<echo> ${jboss.home}</echo>
    <mkdir dir="${build.dir}"/>
    <mkdir dir="${build.classes.dir}"/>
  </target>

  <!-- =================================================================== -->
  <!-- Compiles the source code                                            -->
  <!-- =================================================================== -->
	<target name="compile" depends="prepare">
	    <javac srcdir="${src.dir}"
	           destdir="${build.classes.dir}"
	           debug="off"
	           deprecation="off"
	           optimize="off"
	           includes="**" >      	    	
	    		    	

	    	<classpath refid="classpath"/>
		</javac>
  </target>

  <target name="ServerBankingjar" >
    <jar jarfile="${basedir}/ServerBanking.jar">
      <fileset dir="${src.dir}">
     	<include name="**/*.class"/>
      </fileset>
      <fileset dir="${basedir}/"> 
          <include name="**/*.xml"/> 
      </fileset>
     </jar>
    <copy file="${basedir}/ServerBanking.jar" todir="${jboss.home}/server/default/deploy"/>

  </target>
	

  <target name="run.server" depends="ServerBankingjar">
    <java classname="client.Login" fork="yes" dir=".">
      <classpath refid="classpath"/>
    </java>
  </target>
	
	 <target name="run.client" depends="compile"> 
	    <java classname="client.Login" fork="yes" dir=".">
	      <classpath refid="classpath"/>
	    </java>
	  </target>

  <!-- =================================================================== -->
  <!-- Cleans up generated stuff                                           -->
  <!-- =================================================================== -->
  <target name="clean.db">
    <delete dir="${jboss.home}/server/default/data/hypersonic"/>
  </target>

  <target name="cleanbackoffice">
    <delete dir="${build.dir}"/>
  <!--
  	<delete file="/209/jboss-4.0.1RC2/jboss-4.0.1RC2/server/default/deploy/ParallelBankingRavis.jar"/>
  -->	
  <!--
  	<delete file="\\192.168.0.203/c/jboss-4.0.1RC2/jboss-4.0.1RC2/server/default/deploy/ParallelBankingRavis.jar"/>
 -->   
  <delete file="${jboss.home}/server/default/deploy/ServerBanking.jar"/>
  
  </target>
	
	
</project>

